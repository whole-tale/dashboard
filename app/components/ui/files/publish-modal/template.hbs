<div id="publish-modal" class="ui publish modal">
  <div class="header">
      Publish Tale
  </div>
  <div id="publish-modal-content" class="content">
    <div class="description">
        
      {{!--<p>
          Publishing will create an immutable copy of your Tale with a DOI.
          <i class="info circle blue icon main"></i>
      </p>
      <p>
          This process will allow another user to easily rerun
          your published analysis using the WholeTale platform.
      </p>
      
      <div class="ui form" style="margin-bottom:15px;">
          <div class="required inline field">
              <label>Please choose a target repository:</label>
              {{#ui-dropdown class=repoDropdownClass selected=selectedRepository onChange=(action (mut selectedRepository))
                as |execute mapper|}}
                <div class="default text">Target Repository</div>
                <i class="dropdown icon"></i>
                <div class="menu">
                    {{#each repositories as |repo|}}
                    <div data-value="{{map-value mapper repo}}" class="item">
                        {{repo.name}}
                    </div>
                    {{/each}}
                </div>
              {{/ui-dropdown}}
          </div>
      </div>
      
      <div class="ui styled fluid accordion">
          <div class="title" id="publish-details-collapse-header">
            <small class="ui text muted">More Details
                <i class="dropdown icon"></i>
            </small>
          </div>
          <div class="content" id="publish-details-collapse">
            <p class="transition hidden">
                <p>
                    Your published Tale will include everything that
                    has been uploaded to its associated workspace.
                </p>
                <p>
                    The following required files will be generated 
                    and published along with the Tale itself:
                </p>
                <div class="ui list" id="publish-artifact-details">
                    <div class="item">
                         <i class="environment folder icon"></i>
                        <div class="content" style="padding-top:0;padding-bottom:0;">
                            <div class="environment name header">{{tale.title}}</div>
                            <div class="list">
                                {{#each nonOptionalFiles as |file|}}
                                    <div class="item">
                                        <label>
                                            <div class="content" style="padding-top:0;padding-bottom:0;">
                                                <i class="file icon"></i>
                                                {{file.name}} <i class="info circle blue icon {{file.name}}"></i>
                                            </div>
                                        </label>
                                    </div>
                                {{/each}}
                            </div>
                        </div>
                    </div>
                </div>
            </p>
          </div>
      </div>
      <p></p>
    </div>
      
    <div id="publish-results-panel" class="ui form">
      {{#if (eq publishStatus 'in_progress')}}
          <div class="ui blue message progress-area" id="publishing-progress-message">
            <p class="header publishing-now">
                <a id="publishing-success-label" class="ui blue label">IN PROGRESS</a>
                Your Tale is being published to {{selectedRepository.name}}
            </p>
            <div class="publish-progressbar">
                {{#ui-progress percent=progress class="teal indicating"}}
                  <div class="bar"></div>
                  <div class="label publishing-status-message">
                    <i class="fas fa-spinner fa-pulse"></i> {{statusMessage}}
                  </div>
                {{/ui-progress}}
            </div>     
          </div> 
      {{else if (eq publishStatus 'success')}}
          <div class="ui positive message" id="publishing-success-message">
            <div class="header">
                <a id="publishing-success-label" class="ui green label">SUCCESS</a> {{statusMessage}}
            </div>
            <p id="publish-result">Identifier: <a href={{packageURL}} target='_blank'>{{packageIdentifier}}</a></p>
          </div>
      {{else if (eq publishStatus 'error')}}
          <div class="ui negative message" id="publishing-error-message">
            <div class="header">
              <a id="publishing-error-label" class="ui red label">ERROR</a> An error was encountered while publishing your Tale.
            </div>
            <p id="publish-result">{{statusMessage}}</p>
          </div>
      {{/if}}
    </div>
  </div>
  <div class="actions">             
    <small>
      For more information about publishing, please consult the 
      <a href='https://wholetale.readthedocs.io/en/stable/users_guide/publishing.html' target='_blank'>
          Publishing Guide.
      </a>
    </small>
      
    <div class="ui black deny button" {{action 'closePublishModal'}}>
      {{if (eq publishStatus 'success') 'Close' 'Cancel'}}
    </div>
    <div class="ui positive right labeled icon button 
        {{if (or (eq publishStatus 'success') (or (eq publishStatus 'in_progress') (eq selectedRepository null))) 'disabled'}}" 
        disabled="{{if (or (eq publishStatus 'success') (or (eq publishStatus 'in_progress') (eq selectedRepository null))) 'true' 'false'}}"
        {{action 'submitPublish'}}>
      {{if (or (eq publishStatus 'initialized') (eq publishStatus 'error')) 'Publish'}}
      {{if (eq publishStatus 'success') 'Published'}}
      {{if (eq publishStatus 'in_progress') 'Publishing...'}}
      <i class="fas fa-fw {{if (eq publishStatus 'in_progress') 'fa-spinner fa-pulse' 'fa-check'}} icon"></i>--}}
    </div>
  </div>
</div>