<div id="taleMetadataForm" class='ui form'>
  <div class='inline fields ui grid'>
    <label class='two wide column right aligned'>Title</label>
    <div class='field thirteen wide column'>
        {{input value=model.tale.title placeholder='Enter a title...' readonly=cannotEditTale}}
    </div>
  </div>
  
  <div class='inline fields ui grid'>
    <label class='two wide column right aligned'>Authors</label>
    <div class='field thirteen wide column'>
        <span>{{model.tale.authors}}</span>
    </div>
  </div>
  
  <div class='inline fields ui grid'>
    <label class='two wide column right aligned'>Category</label>
    <div class='field thirteen wide column'>
        {{input value=model.tale.category placeholder='Choose a category...'  readonly=cannotEditTale}}
    </div>
  </div>
  
  <div class='inline fields ui grid'>
    <label class='two wide column right aligned'>Environment</label>
    <div class='field thirteen wide column'>
      <div id="environmentDropdown" class='ui icon selection dropdown {{if (eq environments.length 0) 'loading'}}'>
        <input name='TaleImageId' type='hidden' onchange={{action 'setTaleEnvironment' value='target.value'}}>
        <i class='dropdown icon'></i>
        <div class='default text'> Choose an environment...</div>
        <div class='menu'>
          {{#each environments as |env|}}
            <div class='item' data-value={{env._id}}>
              <img class='ui image environment-icon' src={{env.icon}}> {{env.name}}
            </div>
          {{/each}}
        </div>
      </div>
    </div>
  </div>
  
  <div class='inline fields ui grid'>
    <label class='two wide column right aligned'>Date Created</label>
    <div class='field thirteen wide column'>
      <span>{{model.tale.created}}</span>
    </div>
  </div>
  
  <div class='inline fields ui grid'>
    <label class='two wide column right aligned'>Last Updated</label>
    <div class='field thirteen wide column'>
      <span>{{model.tale.updated}}</span>
    </div>
  </div>
  
  <div class='inline fields ui grid'>
      <label class='two wide column right aligned'>Description</label>
      <div class='thirteen wide column'>
        {{ui/markdown-editor markdownValue=model.tale.description}}
      </div>
  </div>
  
  <div class='inline fields ui grid'>
    <label class='two wide column right aligned'>Illustration</label>
    <div class='ui action field thirteen wide column'>
        <input type='text' id='tale-icon' placeholder='Tale Icon' 
              value={{model.tale.illustration}} 
              readonly={{cannotEditTale}} />
        <div class='ui buttons'>
            <div class='or'></div>
            <button class='ui positive blue button' {{action 'generateIcon' model.tale}}>Generate Illustration</button>
        </div>
    </div>
  </div>

  <div class='inline fields ui grid'>
    <div class='field two wide'></div>
      <div class='field two wide right aligned column'>
        <button {{action 'updateTale'}} class='ui blue submit button' type='submit'
            disabled={{cannotEditTale}}>Save</button>
      </div>
      <div class='field toggle ui checkbox four wide column'>
          {{ui-checkbox class='toggle' label='Public?' checked=model.public onChange=(action (mut model.tale.public)) disabled=cannotEditTale}}
      </div>
  </div>
</div>